{"ast":null,"code":"var _s = $RefreshSig$();\n// StripeCheckoutButton.js\nimport React, { useEffect } from \"react\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StripeCheckout = _ref => {\n  _s();\n  let {\n    userId\n  } = _ref;\n  // const navigate = useNavigate();\n  console.log(\"userId\", userId);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch(`http://localhost:8000/create-checkout-session?userid=${userId}`);\n        const data = await response.json();\n        console.log(\"data\", data);\n        redirectToStripeCheckout(data.sessionId);\n      } catch (error) {\n        console.error(\"Error fetching data:\", error);\n      }\n    };\n    const redirectToStripeCheckout = sessionId => {\n      const stripeScript = document.createElement(\"script\");\n      stripeScript.src = \"https://js.stripe.com/v3/\";\n      stripeScript.async = true;\n      stripeScript.addEventListener(\"load\", () => {\n        const stripe = window.Stripe(\"pk_test_T4jeeCzO54vjFdEld3ighfil00tzeJwFSc\");\n        stripe.redirectToCheckout({\n          sessionId\n        }).then(result => {\n          // Handle any errors during the redirection if needed\n          console.log(\"Redirect result:\", result);\n          console.log(\"success\", `http://localhost:3000?session_id={sessionId}`);\n\n          // // Check if the payment was successful and redirect to the success page\n          // if (result.error) {\n          //   console.error(\"Payment error:\", result.error.message);\n          // } else if (\n          //   result.subscription &&\n          //   result.subscription.status === \"active\"\n          // ) {\n          //   console.log(\"Subscription activated:\", result.subscription);\n\n          // }\n        }).catch(error => {\n          console.error(\"Subscription not activated:\", result);\n        });\n      });\n      document.body.appendChild(stripeScript);\n    };\n    fetchData();\n  }, [userId]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false); // You can return null or an empty fragment since this component doesn't render anything\n};\n_s(StripeCheckout, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = StripeCheckout;\nexport default StripeCheckout;\nvar _c;\n$RefreshReg$(_c, \"StripeCheckout\");","map":{"version":3,"names":["React","useEffect","Fragment","_Fragment","jsxDEV","_jsxDEV","StripeCheckout","_ref","_s","userId","console","log","fetchData","response","fetch","data","json","redirectToStripeCheckout","sessionId","error","stripeScript","document","createElement","src","async","addEventListener","stripe","window","Stripe","redirectToCheckout","then","result","catch","body","appendChild","_c","$RefreshReg$"],"sources":["D:/Prashant/ReduxProject(PS)/AI Generation Context API/musey_ReactRedux/src/StripeCheckout.js"],"sourcesContent":["// StripeCheckoutButton.js\r\nimport React, { useEffect } from \"react\";\r\n\r\nconst StripeCheckout = ({ userId }) => {\r\n  // const navigate = useNavigate();\r\n  console.log(\"userId\", userId);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await fetch(\r\n          `http://localhost:8000/create-checkout-session?userid=${userId}`\r\n        );\r\n        const data = await response.json();\r\n        console.log(\"data\", data);\r\n        redirectToStripeCheckout(data.sessionId);\r\n      } catch (error) {\r\n        console.error(\"Error fetching data:\", error);\r\n      }\r\n    };\r\n\r\n    const redirectToStripeCheckout = (sessionId) => {\r\n      const stripeScript = document.createElement(\"script\");\r\n      stripeScript.src = \"https://js.stripe.com/v3/\";\r\n      stripeScript.async = true;\r\n\r\n      stripeScript.addEventListener(\"load\", () => {\r\n        const stripe = window.Stripe(\r\n          \"pk_test_T4jeeCzO54vjFdEld3ighfil00tzeJwFSc\"\r\n        );\r\n        stripe\r\n          .redirectToCheckout({ sessionId })\r\n          .then((result) => {\r\n            // Handle any errors during the redirection if needed\r\n            console.log(\"Redirect result:\", result);\r\n            console.log(\r\n              \"success\",\r\n              `http://localhost:3000?session_id={sessionId}`\r\n            );\r\n\r\n            // // Check if the payment was successful and redirect to the success page\r\n            // if (result.error) {\r\n            //   console.error(\"Payment error:\", result.error.message);\r\n            // } else if (\r\n            //   result.subscription &&\r\n            //   result.subscription.status === \"active\"\r\n            // ) {\r\n            //   console.log(\"Subscription activated:\", result.subscription);\r\n\r\n            // }\r\n          })\r\n          .catch((error) => {\r\n            console.error(\"Subscription not activated:\", result);\r\n          });\r\n      });\r\n\r\n      document.body.appendChild(stripeScript);\r\n    };\r\n\r\n    fetchData();\r\n  }, [userId]);\r\n\r\n  return <></>; // You can return null or an empty fragment since this component doesn't render anything\r\n};\r\n\r\nexport default StripeCheckout;\r\n"],"mappings":";AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AAAC,SAAAC,QAAA,IAAAC,SAAA;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEzC,MAAMC,cAAc,GAAGC,IAAA,IAAgB;EAAAC,EAAA;EAAA,IAAf;IAAEC;EAAO,CAAC,GAAAF,IAAA;EAChC;EACAG,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEF,MAAM,CAAC;EAE7BR,SAAS,CAAC,MAAM;IACd,MAAMW,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CACzB,wDAAuDL,MAAO,EACjE,CAAC;QACD,MAAMM,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;QAClCN,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEI,IAAI,CAAC;QACzBE,wBAAwB,CAACF,IAAI,CAACG,SAAS,CAAC;MAC1C,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdT,OAAO,CAACS,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC9C;IACF,CAAC;IAED,MAAMF,wBAAwB,GAAIC,SAAS,IAAK;MAC9C,MAAME,YAAY,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;MACrDF,YAAY,CAACG,GAAG,GAAG,2BAA2B;MAC9CH,YAAY,CAACI,KAAK,GAAG,IAAI;MAEzBJ,YAAY,CAACK,gBAAgB,CAAC,MAAM,EAAE,MAAM;QAC1C,MAAMC,MAAM,GAAGC,MAAM,CAACC,MAAM,CAC1B,4CACF,CAAC;QACDF,MAAM,CACHG,kBAAkB,CAAC;UAAEX;QAAU,CAAC,CAAC,CACjCY,IAAI,CAAEC,MAAM,IAAK;UAChB;UACArB,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEoB,MAAM,CAAC;UACvCrB,OAAO,CAACC,GAAG,CACT,SAAS,EACR,8CACH,CAAC;;UAED;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;QACF,CAAC,CAAC,CACDqB,KAAK,CAAEb,KAAK,IAAK;UAChBT,OAAO,CAACS,KAAK,CAAC,6BAA6B,EAAEY,MAAM,CAAC;QACtD,CAAC,CAAC;MACN,CAAC,CAAC;MAEFV,QAAQ,CAACY,IAAI,CAACC,WAAW,CAACd,YAAY,CAAC;IACzC,CAAC;IAEDR,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,CAACH,MAAM,CAAC,CAAC;EAEZ,oBAAOJ,OAAA,CAAAF,SAAA,mBAAI,CAAC,CAAC,CAAC;AAChB,CAAC;AAACK,EAAA,CA5DIF,cAAc;AAAA6B,EAAA,GAAd7B,cAAc;AA8DpB,eAAeA,cAAc;AAAC,IAAA6B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}