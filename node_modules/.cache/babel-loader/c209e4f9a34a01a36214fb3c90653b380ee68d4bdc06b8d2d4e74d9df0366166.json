{"ast":null,"code":"import _regeneratorRuntime from\"D:/Prashant/ReduxProject(PS)/AI Generation Context API/musey_ReactRedux/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Prashant/ReduxProject(PS)/AI Generation Context API/musey_ReactRedux/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";// StripeCheckoutButton.js\nimport React,{useEffect}from\"react\";import\"./Stripe.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StripeCheckout=function StripeCheckout(_ref){var userId=_ref.userId;//**********Submit Section************//\nvar fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"http://localhost:8000/create-checkout-session?userid=\".concat(userId));case 3:response=_context.sent;if(response.ok){_context.next=6;break;}throw new Error(\"Network response was not ok.\");case 6:_context.next=8;return response.json();case 8:data=_context.sent;console.log(\"data\",data);if(data.sessionId){redirectToStripeCheckout(data.sessionId);}else{console.error(\"Invalid sessionId received:\",data);}_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.error(\"Error fetching data:\",_context.t0);case 16:case\"end\":return _context.stop();}},_callee,null,[[0,13]]);}));return function fetchData(){return _ref2.apply(this,arguments);};}();//**********Submit Section************//\n//*************Redirect Section****************//\nvar redirectToStripeCheckout=function redirectToStripeCheckout(sessionId){var stripeScript=document.createElement(\"script\");stripeScript.src=\"https://js.stripe.com/v3/\";stripeScript.async=true;stripeScript.addEventListener(\"load\",function(){alert(\"Stripe script loaded.\");var stripe=window.Stripe(\"pk_test_51MniNtSGd0ho6TQXHQ8Puew9Z1Mk1WVkXRruOE4g58O8U5tdTWZsgWXjTAhH9RmWSgta4USqjd8NupY3KMtXXsFF00DBojq5zE\");alert(\"Redirecting to Checkout...\");stripe.redirectToCheckout({sessionId:sessionId}).then(function(result){// Handle the redirection result\nconsole.log(\"Redirect result:\",result);alert(\"hii\");if(result.error){alert(\"Payment error:\",result.error.message);}else{alert(\"Payment successful!\");}}).catch(function(error){console.error(\"Subscription not activated:\",error);});});document.body.appendChild(stripeScript);};//*************Redirect Section****************//\nvar handleSubscription=function handleSubscription(){fetchData();};return/*#__PURE__*/_jsx(\"div\",{className:\"center-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"columns\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"price\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"header\",children:\"Subscribe to Pro Plan\"}),/*#__PURE__*/_jsxs(\"li\",{className:\"grey\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"$\"}),\" 7.00 per/month\"]}),/*#__PURE__*/_jsx(\"li\",{className:\"grey\",children:\"10GB Storage\"}),/*#__PURE__*/_jsx(\"li\",{className:\"grey\",children:\"10 Emails\"}),/*#__PURE__*/_jsx(\"li\",{className:\"grey\",children:\"10 Domains\"}),/*#__PURE__*/_jsx(\"li\",{className:\"grey\",children:\"1GB Bandwidth\"}),/*#__PURE__*/_jsx(\"li\",{className:\"grey\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"button\",onClick:handleSubscription,children:\"Subscription\"})})]})})});};export default StripeCheckout;","map":{"version":3,"names":["React","useEffect","jsx","_jsx","jsxs","_jsxs","StripeCheckout","_ref","userId","fetchData","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","concat","sent","ok","Error","json","console","log","sessionId","redirectToStripeCheckout","error","t0","stop","apply","arguments","stripeScript","document","createElement","src","async","addEventListener","alert","stripe","window","Stripe","redirectToCheckout","then","result","message","catch","body","appendChild","handleSubscription","className","children","href","onClick"],"sources":["D:/Prashant/ReduxProject(PS)/AI Generation Context API/musey_ReactRedux/src/StripeCheckout.js"],"sourcesContent":["// StripeCheckoutButton.js\r\nimport React, { useEffect } from \"react\";\r\nimport \"./Stripe.css\";\r\n\r\nconst StripeCheckout = ({ userId }) => {\r\n\r\n\r\n  //**********Submit Section************//\r\n  const fetchData = async () => {\r\n    try {\r\n      const response = await fetch(\r\n        `http://localhost:8000/create-checkout-session?userid=${userId}`\r\n      );\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Network response was not ok.\");\r\n      }\r\n\r\n      const data = await response.json();\r\n      console.log(\"data\", data);\r\n\r\n      if (data.sessionId) {\r\n        redirectToStripeCheckout(data.sessionId);\r\n      } else {\r\n        console.error(\"Invalid sessionId received:\", data);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    }\r\n  };\r\n  //**********Submit Section************//\r\n  \r\n\r\n  //*************Redirect Section****************//\r\n  const redirectToStripeCheckout = (sessionId) => {\r\n    const stripeScript = document.createElement(\"script\");\r\n    stripeScript.src = \"https://js.stripe.com/v3/\";\r\n    stripeScript.async = true;\r\n\r\n    stripeScript.addEventListener(\"load\", () => {\r\n      alert(\"Stripe script loaded.\");\r\n\r\n      const stripe = window.Stripe(\r\n        \"pk_test_51MniNtSGd0ho6TQXHQ8Puew9Z1Mk1WVkXRruOE4g58O8U5tdTWZsgWXjTAhH9RmWSgta4USqjd8NupY3KMtXXsFF00DBojq5zE\"\r\n      );\r\n\r\n      alert(\"Redirecting to Checkout...\");\r\n      stripe\r\n        .redirectToCheckout({ sessionId })\r\n        .then((result) => {\r\n          // Handle the redirection result\r\n          console.log(\"Redirect result:\", result);\r\n          alert(\"hii\");\r\n\r\n          if (result.error) {\r\n            alert(\"Payment error:\", result.error.message);\r\n          } else {\r\n            alert(\"Payment successful!\");\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Subscription not activated:\", error);\r\n        });\r\n    });\r\n\r\n    document.body.appendChild(stripeScript);\r\n  };\r\n  //*************Redirect Section****************//\r\n\r\n\r\n  const handleSubscription = () => {\r\n    fetchData();\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"center-container\">\r\n      <div className=\"columns\">\r\n        <ul className=\"price\">\r\n          <li className=\"header\">Subscribe to Pro Plan</li>\r\n          <li className=\"grey\">\r\n            <b>$</b> 7.00 per/month\r\n          </li>\r\n          <li className=\"grey\">10GB Storage</li>\r\n          <li className=\"grey\">10 Emails</li>\r\n          <li className=\"grey\">10 Domains</li>\r\n          <li className=\"grey\">1GB Bandwidth</li>\r\n          <li className=\"grey\">\r\n            <a href=\"#\" className=\"button\" onClick={handleSubscription}>\r\n              Subscription\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StripeCheckout;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}