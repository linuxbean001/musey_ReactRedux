{"ast":null,"code":"import React,{useState,useContext,useEffect}from\"react\";import\"../../Style.css\";import{useFormik}from\"formik\";import*as Yup from\"yup\";import{AuthContext}from\"../../MuseyScreens/Contexts/AuthContext\";import{useNavigate}from\"react-router-dom\";import{toast,ToastContainer}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var validationSchema=Yup.object().shape({password:Yup.string().required(\"Password is required\"),Cpassword:Yup.string().required(\"Confirm Password is required\").oneOf([Yup.ref(\"password\"),null],\"Passwords must match\")});function ChangePassword(){var navigate=useNavigate();useEffect(function(){var getAccessTokenFromURL=function getAccessTokenFromURL(){var urlParams=new URLSearchParams(window.location.search);if(urlParams.get(\"password\")){handleForgot();}};getAccessTokenFromURL();},[]);var handleForgot=function handleForgot(values){console.log(\"values\",values);if(values!=undefined){var urlSearchParams=new URLSearchParams(window.location.search);var token=urlSearchParams.get(\"password\");console.log(\"token\",token);if(token){var combinedData={password:values.password,token:token};var BASE_URL=\"http://www.musey.ai/api\";var url=\"\".concat(BASE_URL,\"/changepassword/\");fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(combinedData)}).then(function(response){return response.json();}).then(function(data){console.log(\"data\",data);if(data.status===\"success\"){toast.success(data.message);setTimeout(function(){navigate(\"/\");},2000);}}).catch(function(error){console.log(\"error\",error);});}}};var formik=useFormik({initialValues:{password:\"\",Cpassword:\"\"},validationSchema:validationSchema,onSubmit:handleForgot});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"container1\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:formik.handleSubmit,className:\"centered-content\",children:[/*#__PURE__*/_jsx(\"h1\",{style:{color:\"white\"},children:\"Password Change\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col justify-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control text-center\",placeholder:\"Enter Password\",name:\"password\",value:formik.values.password,onChange:formik.handleChange}),formik.touched.password&&formik.errors.password&&/*#__PURE__*/_jsx(\"span\",{className:\"error white\",style:{color:\"red\"},children:formik.errors.password})]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col justify-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control text-center\",placeholder:\"Enter Confirm Password\",name:\"Cpassword\",value:formik.values.Cpassword,onChange:formik.handleChange}),formik.touched.Cpassword&&formik.errors.Cpassword&&/*#__PURE__*/_jsx(\"span\",{className:\"error white\",style:{color:\"red\"},children:formik.errors.Cpassword})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row mt-3\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Forgot Password\"})})]})}),/*#__PURE__*/_jsx(ToastContainer,{})]});}export default ChangePassword;","map":{"version":3,"names":["React","useState","useContext","useEffect","useFormik","Yup","AuthContext","useNavigate","toast","ToastContainer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","validationSchema","object","shape","password","string","required","Cpassword","oneOf","ref","ChangePassword","navigate","getAccessTokenFromURL","urlParams","URLSearchParams","window","location","search","get","handleForgot","values","console","log","undefined","urlSearchParams","token","combinedData","BASE_URL","url","concat","fetch","method","headers","body","JSON","stringify","then","response","json","data","status","success","message","setTimeout","catch","error","formik","initialValues","onSubmit","children","className","handleSubmit","style","color","type","placeholder","name","value","onChange","handleChange","touched","errors"],"sources":["D:/Prashant/ReduxProject(PS)/AI Generation Context API/musey_ReactRedux/src/Shared/Component/ChangePassword.jsx"],"sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\r\nimport \"../../Style.css\";\r\nimport { useFormik } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport { AuthContext } from \"../../MuseyScreens/Contexts/AuthContext\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nconst validationSchema = Yup.object().shape({\r\n  password: Yup.string().required(\"Password is required\"),\r\n  Cpassword: Yup.string()\r\n    .required(\"Confirm Password is required\")\r\n    .oneOf([Yup.ref(\"password\"), null], \"Passwords must match\"),\r\n});\r\n\r\nfunction ChangePassword() {\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const getAccessTokenFromURL = () => {\r\n      const urlParams = new URLSearchParams(window.location.search);\r\n      if (urlParams.get(\"password\")) {\r\n        handleForgot();\r\n      }\r\n    };\r\n    getAccessTokenFromURL();\r\n  }, []);\r\n\r\n  const handleForgot = (values) => {\r\n    console.log(\"values\", values);\r\n    if (values != undefined) {\r\n      const urlSearchParams = new URLSearchParams(window.location.search);\r\n      const token = urlSearchParams.get(\"password\");\r\n      console.log(\"token\", token);\r\n      if (token) {\r\n        const combinedData = {\r\n          password: values.password,\r\n          token: token,\r\n        };\r\n        const BASE_URL = \"http://www.musey.ai/api\";\r\n        const url = `${BASE_URL}/changepassword/`;\r\n        fetch(url, {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify(combinedData),\r\n        })\r\n          .then((response) => response.json())\r\n          .then((data) => {\r\n            console.log(\"data\", data);\r\n            if (data.status === \"success\") {\r\n              toast.success(data.message);\r\n              setTimeout(() => {\r\n                navigate(\"/\");\r\n              }, 2000);\r\n            }\r\n          })\r\n          .catch((error) => {\r\n            console.log(\"error\", error);\r\n          });\r\n      }\r\n    }\r\n  };\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      password: \"\",\r\n      Cpassword: \"\",\r\n    },\r\n    validationSchema,\r\n    onSubmit: handleForgot,\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container1\">\r\n        {/* Rest of the form */}\r\n        <form onSubmit={formik.handleSubmit} className=\"centered-content\">\r\n          <h1 style={{ color: \"white\" }}>Password Change</h1>\r\n          <div className=\"row\">\r\n            <div className=\"col justify-center\">\r\n              <input\r\n                type=\"password\"\r\n                className=\"form-control text-center\"\r\n                placeholder=\"Enter Password\"\r\n                name=\"password\"\r\n                value={formik.values.password}\r\n                onChange={formik.handleChange}\r\n              />\r\n              {formik.touched.password && formik.errors.password && (\r\n                <span className=\"error white\" style={{ color: \"red\" }}>\r\n                  {formik.errors.password}\r\n                </span>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <br />\r\n          <div className=\"row\">\r\n            <div className=\"col justify-center\">\r\n              <input\r\n                type=\"password\"\r\n                className=\"form-control text-center\"\r\n                placeholder=\"Enter Confirm Password\"\r\n                name=\"Cpassword\"\r\n                value={formik.values.Cpassword}\r\n                onChange={formik.handleChange}\r\n              />\r\n              {formik.touched.Cpassword && formik.errors.Cpassword && (\r\n                <span className=\"error white\" style={{ color: \"red\" }}>\r\n                  {formik.errors.Cpassword}\r\n                </span>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"row mt-3\">\r\n            <button type=\"submit\" className=\"btn btn-primary\">\r\n              Forgot Password\r\n            </button>\r\n          </div>\r\n        </form>\r\n        {/* Rest of the form */}\r\n      </div>\r\n      <ToastContainer />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ChangePassword;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}